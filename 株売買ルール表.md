# 株売買ルール表（3戦略）

このルールは「感情での売買を減らすための基準」です。  
共通ルールとして、必ず発注前に「エントリー理由・撤退条件・資金配分」を記録します。

## 1. 短期（スイング）ルール表

| 項目 | ルール |
|---|---|
| 対象銘柄 | 東証プライム中心、20日平均売買代金 `10億円以上` |
| トレンド条件 | 株価が `25日移動平均線` より上 |
| エントリー条件 | 直近高値から `-5%〜-10%` の押し目、または高値更新の初動 |
| 決算回避 | 決算発表 `5営業日前` から新規エントリー禁止 |
| 1銘柄の資金上限 | 総資産の `10%` まで |
| 1回の損失許容 | 総資産の `1%` 以内 |
| 損切り | 取得単価から `-6%`（寄りで機械的執行） |
| 利確（第1目標） | `+12%` で半分利確 |
| 利確（第2目標） | 残りは `10日線割れ` または `高値から-7%` で手仕舞い |
| 連敗時ルール | `3連敗` したら次の `5営業日` は取引量を半分 |
| 取引頻度 | 週 `1〜5回`（無理に毎日取引しない） |

## 2. 中長期（ファンダ中心）ルール表

| 項目 | ルール |
|---|---|
| 対象銘柄 | 本業が理解できる企業のみ |
| 売上成長 | 直近3年CAGR `+5%` 以上 |
| 収益性 | 営業利益率 `10%` 以上（業種差は調整） |
| 財務健全性 | 自己資本比率 `40%` 以上、営業CFが黒字基調 |
| 資本効率 | ROE `8%` 以上 |
| バリュエーション | PERが「同業平均以下」または「自社5年中央値以下」 |
| エントリー方法 | `3分割` で買い下がり（例: 初回40% / 次回30% / 最終30%） |
| 1銘柄の資金上限 | 総資産の `15%` まで |
| 同一業種上限 | 総資産の `35%` まで |
| 損切り（価格） | 原則 `-15%` を超えたら再点検、前提崩れなら撤退 |
| 損切り（業績） | ガイダンス悪化・減配・競争優位崩壊で即見直し |
| 利確 | 適正価値到達、または成長鈍化で段階的に利確 |
| 見直し頻度 | 四半期決算ごとに実施 |

## 3. 配当重視（インカム）ルール表

| 項目 | ルール |
|---|---|
| 目的 | 配当収入の安定成長 |
| 対象銘柄 | 連続配当実績が長い企業、または累進配当方針あり |
| 配当利回り基準 | 新規購入時 `3.0%〜5.0%` を目安（高すぎる利回りは要注意） |
| 配当性向 | 原則 `30%〜60%` を許容レンジ |
| 財務条件 | ネット有利子負債/EBITDAが過大でないこと |
| 減配リスク確認 | 利益・CF・業界構造の3点を確認してから購入 |
| エントリー方法 | 毎月定額 + 下落時追加（例: 直近高値から `-10%` で追加） |
| 1銘柄の資金上限 | 総資産の `12%` まで |
| セクター分散 | 最低 `5セクター` に分散 |
| 売却条件 | `減配・無配`、または投資仮説の崩壊時のみ売却検討 |
| NISA優先 | 配当課税効率のためNISA枠を優先利用 |
| 見直し頻度 | 半年ごと（権利落ち後・本決算後） |

## 共通チェックリスト（発注前）

- エントリー理由を1行で説明できるか
- 損切り価格と利確条件が事前に決まっているか
- 1銘柄上限・業種上限を超えていないか
- 直近イベント（決算、政策、指数イベント）を確認したか
- 発注後にルールを変更しない前提になっているか

## 運用メモ

- ルール改定は `月1回` のみ実施（場中は変更禁止）
- 売買ログは「日付・理由・結果・改善点」を必ず記録
- この表はテンプレートのため、実運用前に許容リスクに合わせて数値を調整する

## API取得対応表（自動化用）

以下は、このルール表を自動判定するための「データ項目 -> 取得元API -> 取得対象」の対応表。
更新頻度の違いがあるため、判定時は必ず「データ取得日時」を一緒に保存する。

### 1) 価格・出来高・ボラティリティ（主にテクニカル判定）

| ルールで使う項目 | 推奨API | 取得対象（例） | 更新目安 | 備考 |
|---|---|---|---|---|
| 現在値 / 終値 / 高値安値 | J-Quants API | 日足OHLCV（銘柄コード指定） | 引け後更新 | 日本株の主データはこれを基準にする |
| 移動平均（5/25/75日） | J-Quants API | 日足終値を取得してローカル計算 | 日次 | APIに依存せず計算実装で統一 |
| ATR / ボラティリティ | J-Quants API | 日足高値・安値・終値を取得してローカル計算 | 日次 | 損切り幅計算に使用 |
| 出来高急増判定 | J-Quants API | 当日出来高と過去N日平均出来高 | 日次 | 異常値除外ルールを入れる |

### 2) ファンダメンタル（中長期・割安性判定）

| ルールで使う項目 | 推奨API | 取得対象（例） | 更新目安 | 備考 |
|---|---|---|---|---|
| 売上成長率 / 営業利益率 | J-Quants API | 財務情報（PL系）を取得して前年比計算 | 決算更新ベース | 四半期/通期の混在に注意 |
| ROE / 自己資本比率 | J-Quants API | 財務情報（BS/指標） | 決算更新ベース | 取得不可項目は計算式で補完 |
| PER / PBR | J-Quants API（不足時は補完API） | 株価 + EPS/BPS から計算、または指標値取得 | 日次 + 決算時 | EPS/BPSの基準期ズレを統一 |
| フリーCF傾向 | J-Quants API | CF項目（営業CF/投資CF）を時系列取得 | 決算更新ベース | 3期以上でトレンド判定 |

### 3) 配当・株主還元（インカム判定）

| ルールで使う項目 | 推奨API | 取得対象（例） | 更新目安 | 備考 |
|---|---|---|---|---|
| 配当利回り | J-Quants API | 配当予想/実績 + 株価で計算 | 日次 + 決算時 | 権利落ち前後の見かけ利回りに注意 |
| 配当性向 | J-Quants API | 1株配当金とEPSから計算 | 決算更新ベース | 赤字期は判定除外条件を追加 |
| 増配/減配履歴 | J-Quants API | 配当時系列（年次/期次） | 決算更新ベース | 連続増配年数を算出可能 |

### 4) イベント・ニュース（除外/警戒判定）

| ルールで使う項目 | 推奨API | 取得対象（例） | 更新目安 | 備考 |
|---|---|---|---|---|
| 決算発表日 / 重要開示日 | J-Quants API | 決算発表予定・適時開示関連データ | 日次 | 発表前後の新規エントリー抑制に使用 |
| 悪材料ニュース検知 | NewsAPI または Alpha Vantage News | 銘柄名/コードでニュース検索 | ほぼリアルタイム（プラン依存） | 無料プランは遅延条件を要確認 |
| センチメント補助 | Alpha Vantage News Sentiment | ニュース極性スコア | API仕様依存 | 補助指標として使い、過信しない |

### 5) マクロ地合い（市場フィルター）

| ルールで使う項目 | 推奨API | 取得対象（例） | 更新目安 | 備考 |
|---|---|---|---|---|
| 金利・景気指標フィルター | FRED API | 政策金利、長短金利差、景気系シリーズ | 指標公表ベース | 銘柄判定の前段フィルターとして使用 |

### 実装時の固定ルール（推奨）

- 判定処理では必ず `as_of`（データ時点）を保持し、時点不整合のデータを混在させない。
- 指標値（PER/PBR/ROE等）は、可能ならAPI値を採用し、欠損時のみ計算で補完する。
- ニュース系APIはプランで遅延有無が変わるため、運用前に「最短遅延時間」を設定値化する。
- 日次バッチは「引け後データ更新完了時刻」を待ってから実行する。